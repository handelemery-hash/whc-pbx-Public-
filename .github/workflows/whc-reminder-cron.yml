name: WHC Reminder + Birthday Jobs

on:
  schedule:
    # ðŸ•’ Appointment reminders (Monâ€“Fri 8AMâ€“5PM JM)
    - cron: '0,30 13-22 * * 1-5'
    # ðŸŽ‚ Birthday calls (daily 9AM JM / 14:00 UTC)
    - cron: '0 14 * * *'
  workflow_dispatch:

jobs:
  # -------------------
  # Reminder Job
  # -------------------
  run-reminders:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Trigger appointment reminders
        run: |
          curl --fail --show-error --silent -X POST \
            "https://gallant-reverence-production.up.railway.app/jobs/run-reminders?token=${{ secrets.STATUS_TOKEN }}"

  # -------------------
  # Birthday Job
  # -------------------
  run-birthdays:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Trigger birthday calls
        run: |
          curl --fail --show-error --silent -X POST \
            "https://gallant-reverence-production.up.railway.app/jobs/run-birthdays?token=${{ secrets.STATUS_TOKEN }}"
