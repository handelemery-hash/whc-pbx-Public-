name: WHC Reminder Job

on:
  schedule:
    # Run every 30 minutes, Mon–Fri, between 8 AM–5 PM Jamaica time (13:00–22:00 UTC)
    - cron: "0,30 13-22 * * 1-5"
  workflow_dispatch:   # allow manual runs from the Actions tab

jobs:
  run-reminders:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Trigger reminders endpoint
        run: |
          set -euo pipefail
          # Hit the Railway endpoint securely using your secret STATUS_TOKEN
          curl --fail --show-error --silent -X POST \
            "https://gallant-reverence-production.up.railway.app/jobs/run-reminders?token=${{ secrets.STATUS_TOKEN }}"
      - name: Show time (for logs)
        run: echo "Ran at (UTC): $(date -u +"%Y-%m-%d %H:%M:%S")"
