name: WHC Reminder + Birthday Jobs

on:
  schedule:
    # ðŸ•’ Appointment reminders (Monâ€“Fri 8:00â€“17:00 Jamaica = 13â€“22 UTC)
    - cron: '0,30 13-22 * * 1-5'
    # ðŸŽ‚ Birthday calls (daily 09:00 Jamaica = 14:00 UTC)
    - cron: '0 14 * * *'
  workflow_dispatch:

jobs:
  run-reminders:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Trigger appointment reminders
        run: |
          curl --fail --show-error --silent -X POST \
            "https://gallant-reverence-production.up.railway.app/jobs/run-reminders?token=${{ secrets.STATUS_TOKEN }}"

  run-birthdays:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Trigger birthday calls
        run: |
          curl --fail --show-error --silent -X POST \
            "https://gallant-reverence-production.up.railway.app/jobs/run-birthdays?token=${{ secrets.STATUS_TOKEN }}"
